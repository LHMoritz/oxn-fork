# generated by datamodel-codegen:
#   filename:  experiment_schema.json
#   timestamp: 2025-01-18T11:32:51+00:00

from __future__ import annotations

from typing import Any, Dict, List, Optional, Union

from pydantic import BaseModel, Field, constr


class Jaeger(BaseModel):
    name: str
    namespace: str


class Prometheus(BaseModel):
    name: str
    namespace: str
    target: str


class Services(BaseModel):
    jaeger: Jaeger
    prometheus: List[Prometheus]


class Responses(BaseModel):
    name: str
    target: str
    metric_name: str
    type: str = Field('metric', const=True)
    step: int
    left_window: str
    right_window: str


class Responses1(BaseModel):
    name: str
    type: str = Field('trace', const=True)
    service_name: str
    left_window: str
    right_window: str
    limit: Optional[int] = None


class Treatments(BaseModel):
    action: str
    params: Dict[str, Any]


class RequiredItem(BaseModel):
    namespace: str
    name: str


class Sue(BaseModel):
    compose: str
    exclude: Optional[List[str]] = None
    include: Optional[List[str]] = None
    required: Optional[List[RequiredItem]] = None


class Target(BaseModel):
    name: str
    namespace: str
    port: int


class Loadgen(BaseModel):
    run_time: str
    max_users: Optional[int] = None
    spawn_rate: Optional[int] = None
    locust_files: Optional[List[str]] = None
    target: Optional[Target] = None


class Experiment(BaseModel):
    name: Optional[str] = None
    version: str
    orchestrator: str
    services: Optional[Services] = None
    responses: List[Union[Responses, Responses1]]
    treatments: Optional[List[Dict[constr(regex=r'^.*$'), Treatments]]] = None
    sue: Sue
    loadgen: Loadgen


class Model(BaseModel):
    experiment: Experiment
